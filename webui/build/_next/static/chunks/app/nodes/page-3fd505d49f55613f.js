(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[514],{52459:function(e,s,l){Promise.resolve().then(l.bind(l,20016))},20016:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return F}});var a=l(57437),n=l(2265),i=l(99376),t=l(27648),r=l(73578),c=l(9127),o=l(62869),d=l(53647),x=l(35974),h=l(40308);let u=e=>({CONNECTED:"bg-green-100 text-green-800",DISCONNECTED:"bg-red-100 text-red-800",UNKNOWN:"bg-gray-100 text-gray-800",PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",j=e=>{let{node:s}=e,l=(0,h.Q_)(s),n=u(l);return(0,a.jsx)(x.C,{className:"text-xs ".concat(n),children:l})},m=e=>{let{node:s}=e,l=(0,h.gp)(s),n=u(l);return(0,a.jsx)(x.C,{className:"text-xs ".concat(n),children:l})};var v=l(41351),N=l(14822),b=l(79205);let g=(0,b.Z)("CircuitBoard",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M11 9h4a2 2 0 0 0 2-2V3",key:"1ve2rv"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"M7 21v-4a2 2 0 0 1 2-2h4",key:"1fwkro"}],["circle",{cx:"15",cy:"15",r:"2",key:"3i40o0"}]]),p=(0,b.Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),f=(e,s,l)=>void 0===e||void 0===s?"N/A":"".concat(e.toFixed(1),"/").concat(s.toFixed(1)," ").concat(l),y=e=>void 0===e?0:Number((e/1073741824).toFixed(1)),w=e=>{let{available:s,total:l,icon:n,label:i,unit:t,variant:r}=e,c=s/l*100;return(0,a.jsxs)("div",{className:"flex items-center space-x-2 ".concat("large"===r?"mb-5":"compact"===r?"mb-0.5":"mb-1"),children:["compact"!==r&&(0,a.jsxs)("div",{className:"".concat("large"===r?"w-24":"w-20 text-sm "," flex items-center"),children:[(0,a.jsx)("span",{className:"mr-2",children:n}),i]}),(0,a.jsx)("div",{className:"flex-grow bg-gray-100 rounded-md ".concat("large"===r?"h-4":"compact"===r?"h-1":"h-2"),children:(0,a.jsx)("div",{className:"bg-blue-500 rounded-md ".concat("large"===r?"h-4":"compact"===r?"h-1":"h-2"),style:{width:"".concat(c,"%")}})}),(0,a.jsx)("div",{className:"".concat("large"===r?"w-32":"compact"===r?"w-16 text-sm ":"w-24 text-sm "," text-right"),children:f(s,l,t)})]})},C=e=>{var s,l,n,i;let{node:t,variant:r="default"}=e,c=null===(l=t.Info)||void 0===l?void 0:null===(s=l.ComputeNodeInfo)||void 0===s?void 0:s.AvailableCapacity,o=null===(i=t.Info)||void 0===i?void 0:null===(n=i.ComputeNodeInfo)||void 0===n?void 0:n.MaxCapacity;return c&&o?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(w,{available:c.CPU||0,total:o.CPU||1,icon:(0,a.jsx)(N.Z,{size:"large"===r?20:14}),label:"CPU",unit:"cores",variant:r}),(0,a.jsx)(w,{available:y(c.Memory),total:y(o.Memory),icon:(0,a.jsx)(g,{size:"large"===r?20:14}),label:"Memory",unit:"GB",variant:r}),(0,a.jsx)(w,{available:y(c.Disk),total:y(o.Disk),icon:(0,a.jsx)(p,{size:"large"===r?20:14}),label:"Disk",unit:"GB",variant:r}),void 0!==o.GPU&&(0,a.jsx)(w,{available:c.GPU||0,total:o.GPU,icon:(0,a.jsx)(N.Z,{size:"large"===r?20:14}),label:"GPU",unit:"units",variant:r})]}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"No resource information available"})};function k(e){let{nodes:s=[],pageSize:l,setPageSize:n,pageIndex:i,onPreviousPage:x,onNextPage:u,hasNextPage:N}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.iA,{children:[(0,a.jsx)(r.xD,{className:"bg-muted/50",children:(0,a.jsxs)(r.SC,{children:[(0,a.jsx)(r.ss,{className:"p-3 w-28",children:"Node ID"}),(0,a.jsx)(r.ss,{className:"w-28",children:"Node Type"}),(0,a.jsx)(r.ss,{className:"w-28",children:"Membership"}),(0,a.jsx)(r.ss,{className:"w-28",children:"Connection"}),(0,a.jsx)(r.ss,{className:"w-60",children:"Resources"}),(0,a.jsx)(r.ss,{className:"w-64",children:"Labels"})]})}),(0,a.jsx)(r.RM,{children:s.map(e=>{var s,l,n,i,o;return(0,a.jsxs)(r.SC,{children:[(0,a.jsx)(r.pj,{className:"p-3",children:(0,a.jsx)(t.default,{href:"/nodes?id=".concat(null===(s=e.Info)||void 0===s?void 0:s.NodeID),children:(0,a.jsx)(c.Z,{text:null!==(o=null===(l=e.Info)||void 0===l?void 0:l.NodeID)&&void 0!==o?o:"",maxLength:10})})}),(0,a.jsx)(r.pj,{children:(0,h.jo)(e)}),(0,a.jsx)(r.pj,{children:(0,a.jsx)(m,{node:e})}),(0,a.jsx)(r.pj,{children:(0,a.jsx)(j,{node:e})}),(0,a.jsx)(r.pj,{className:"p-2",children:(0,a.jsx)(C,{node:e})}),(0,a.jsx)(r.pj,{children:(0,a.jsx)(v.Z,{labels:null===(n=e.Info)||void 0===n?void 0:n.Labels})})]},null===(i=e.Info)||void 0===i?void 0:i.NodeID)})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between space-x-2 py-4 hidden",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Nodes per page"}),(0,a.jsxs)(d.Ph,{value:"".concat(l),onValueChange:e=>n(Number(e)),children:[(0,a.jsx)(d.i4,{className:"h-8 w-[70px]",children:(0,a.jsx)(d.ki,{placeholder:l})}),(0,a.jsx)(d.Bw,{side:"top",children:[10,20,30,40,50].map(e=>(0,a.jsx)(d.Ql,{value:"".concat(e),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.z,{variant:"outline",size:"sm",onClick:x,disabled:0===i,children:"Previous"}),(0,a.jsx)(o.z,{variant:"outline",size:"sm",onClick:u,disabled:!N,children:"Next"})]})]})]})}var I=l(95186),Z=l(47050),E=l(59581),P=l(89338),S=l(82431);let D=(0,b.Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);function z(){let[e,s]=(0,n.useState)([]),[l,i]=(0,n.useState)(0),[t,r]=(0,n.useState)(""),{isInitialized:c}=(0,E.h)(),[d,u]=(0,n.useState)(20),[j,m]=(0,n.useState)(0),[v,N]=(0,n.useState)(void 0),[b,g]=(0,n.useState)(!1),p=(0,n.useCallback)(async()=>{if(c)try{var e;let l=await Z.pO.listNodes({query:{limit:1e4,next_token:0===j?void 0:v},throwOnError:!0}),a=null!==(e=l.data.Nodes)&&void 0!==e?e:[];s(a);let n=a.filter(e=>"CONNECTED"==(0,h.Q_)(e)).length;i(n),N(l.data.NextToken)}catch(e){console.error("Error fetching nodes:",e),s([]),i(0)}},[c,j,v]);(0,n.useEffect)(()=>{p()},[p]);let f=(0,n.useCallback)(()=>{g(!0),m(0),N(void 0),p().then(()=>{setTimeout(()=>g(!1),1e3)})},[p]);(0,P.G)("nodes",f);let y=e.filter(e=>{var s,l,a;return null!==(a=null===(l=e.Info)||void 0===l?void 0:null===(s=l.NodeID)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase()))&&void 0!==a&&a});return(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Nodes"}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(I.I,{className:"w-80",type:"search",value:t,onChange:e=>r(e.target.value),placeholder:"Filter nodes..."}),(0,a.jsx)(o.z,{onClick:f,disabled:b,variant:"outline",size:"icon","aria-label":"Refresh nodes",children:(0,a.jsx)(S.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)(x.C,{variant:"outline",className:"text-sm px-3 py-1 flex items-center gap-2",children:[(0,a.jsx)(D,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[l," Connected"]})]})]}),(0,a.jsx)(k,{nodes:y,pageSize:d,setPageSize:e=>{u(e),m(0),N(void 0)},pageIndex:j,onPreviousPage:()=>{j>0&&m(j-1)},onNextPage:()=>{v&&m(j+1)},hasNextPage:!!v})]})}var O=l(12339),M=l(93022),U=l(66070),G=l(34577),R=e=>{var s,l,n,i,t,r;let{node:c}=e,o=null===(s=c.Info)||void 0===s?void 0:s.ComputeNodeInfo;return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(U.Zb,{children:(0,a.jsxs)(U.aY,{className:"pt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Basic Information"}),(0,a.jsx)(G.Z,{label:"Node ID",children:null===(l=c.Info)||void 0===l?void 0:l.NodeID}),(0,a.jsx)(G.Z,{label:"Node Type",children:null===(n=c.Info)||void 0===n?void 0:n.NodeType}),(0,a.jsx)(G.Z,{label:"Connection",children:(0,a.jsx)(j,{node:c})}),(0,a.jsx)(G.Z,{label:"Membership",children:(0,a.jsx)(m,{node:c})}),(0,a.jsx)(G.Z,{label:"Version",children:(null===(t=c.Info)||void 0===t?void 0:null===(i=t.BacalhauVersion)||void 0===i?void 0:i.GitVersion)||"N/A"}),(0,a.jsx)(G.Z,{label:"Running",children:null==o?void 0:o.RunningExecutions}),(0,a.jsx)(G.Z,{label:"Enqueued",children:null==o?void 0:o.EnqueuedExecutions})]})}),(0,a.jsx)(U.Zb,{children:(0,a.jsxs)(U.aY,{className:"pt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Resources"}),(0,a.jsx)(C,{node:c,variant:"large"})]})}),(0,a.jsx)(U.Zb,{children:(0,a.jsxs)(U.aY,{className:"pt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Capabilities"}),(0,a.jsx)(G.Z,{label:"Engines",children:(0,a.jsx)(v.Z,{labels:null==o?void 0:o.ExecutionEngines,color:"bg-blue-100 text-blue-800"})}),(0,a.jsx)(G.Z,{label:"Publishers",children:(0,a.jsx)(v.Z,{labels:null==o?void 0:o.Publishers,color:"bg-green-100 text-green-800"})}),(0,a.jsx)(G.Z,{label:"Storage",children:(0,a.jsx)(v.Z,{labels:null==o?void 0:o.StorageSources,color:"bg-purple-100 text-purple-800"})})]})}),(0,a.jsx)(U.Zb,{children:(0,a.jsxs)(U.aY,{className:"pt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Labels"}),(0,a.jsx)(v.Z,{labels:null===(r=c.Info)||void 0===r?void 0:r.Labels})]})})]})},T=l(86574),_=l(12658),L=e=>{let{node:s}=e;return(0,a.jsx)(U.Zb,{className:"bg-gray-900 text-white",children:(0,a.jsx)(U.aY,{children:(0,a.jsx)(T.Z,{language:"json",style:_.Z,customStyle:{backgroundColor:"transparent",padding:"1rem",margin:0,borderRadius:"0.5rem"},children:JSON.stringify(s,null,2)})})})},V=l(52623),A=l(23289);let B=()=>(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsx)(M.O,{className:"h-8 w-64 mb-4"}),(0,a.jsx)(M.O,{className:"h-[400px] w-full"})]});var q=e=>{var s;let{nodeId:l}=e,{data:i,isLoading:t,error:r,execute:c}=(0,V.H)(),o=(0,n.useCallback)(()=>{c(()=>Z.pO.getNode({path:{id:l},throwOnError:!0}).then(e=>e.data.Node))},[c,l]);return((0,n.useEffect)(()=>{o()},[o]),t)?(0,a.jsx)(B,{}):r?(0,a.jsx)(A.X,{error:r}):i?(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:null===(s=i.Info)||void 0===s?void 0:s.NodeID})}),(0,a.jsxs)(O.mQ,{defaultValue:"information",children:[(0,a.jsxs)(O.dr,{children:[(0,a.jsx)(O.SP,{value:"information",children:"Information"}),(0,a.jsx)(O.SP,{value:"inspect",children:"Inspect"})]}),(0,a.jsx)(O.nU,{value:"information",children:(0,a.jsx)(R,{node:i})}),(0,a.jsx)(O.nU,{value:"inspect",children:(0,a.jsx)(L,{node:i})})]})]}):void 0};function Y(){let e=(0,i.useSearchParams)().get("id");return e?(0,a.jsx)(q,{nodeId:e}):(0,a.jsx)(z,{})}function F(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(Y,{})})}}},function(e){e.O(0,[310,972,293,960,407,371,971,117,744],function(){return e(e.s=52459)}),_N_E=e.O()}]);