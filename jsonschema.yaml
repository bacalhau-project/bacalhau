$defs:
  JobShardingConfig:
    additionalProperties: false
    properties:
      batch_size:
        type: integer
      glob_pattern:
        type: string
      glob_pattern_base_path:
        type: string
    required:
    - glob_pattern
    - batch_size
    - glob_pattern_base_path
    type: object
  JobSpec:
    additionalProperties: false
    properties:
      annotations:
        items:
          type: string
        type: array
      apiVersion:
        type: string
      contexts:
        items:
          $ref: '#/$defs/StorageSpec'
        type: array
      donottrack:
        type: boolean
      engine:
        type: integer
      engine_name:
        enum:
        - noop
        - docker
        - wasm
        - language
        - pythonwasm
        type: string
      inputs:
        items:
          $ref: '#/$defs/StorageSpec'
        type: array
      job_spec_docker:
        $ref: '#/$defs/JobSpecDocker'
      job_spec_language:
        $ref: '#/$defs/JobSpecLanguage'
      outputs:
        items:
          $ref: '#/$defs/StorageSpec'
        type: array
      publisher:
        type: integer
      publisher_name:
        enum:
        - noop
        - ipfs
        - filecoin
        - estuary
        type: string
      resources:
        $ref: '#/$defs/ResourceUsageConfig'
      sharding:
        $ref: '#/$defs/JobShardingConfig'
      verifier:
        type: integer
      verifier_name:
        enum:
        - noop
        - deterministic
        type: string
    required:
    - apiVersion
    - engine_name
    - verifier_name
    - publisher_name
    - resources
    - inputs
    - outputs
    - annotations
    type: object
  JobSpecDocker:
    additionalProperties: false
    properties:
      entrypoint:
        items:
          type: string
        type: array
      env:
        items:
          type: string
        type: array
      image:
        type: string
      workdir:
        type: string
    required:
    - image
    - entrypoint
    - env
    type: object
  JobSpecLanguage:
    additionalProperties: false
    properties:
      command:
        type: string
      context:
        $ref: '#/$defs/StorageSpec'
      deterministic:
        type: boolean
      language:
        type: string
      language_version:
        type: string
      program_path:
        type: string
      requirements_path:
        type: string
    required:
    - language
    - language_version
    - deterministic
    - context
    - command
    - program_path
    - requirements_path
    type: object
  ResourceUsageConfig:
    additionalProperties: false
    properties:
      cpu:
        type: string
      disk:
        type: string
      gpu:
        type: string
      memory:
        type: string
    required:
    - cpu
    - memory
    - disk
    - gpu
    type: object
  StorageSpec:
    additionalProperties: false
    properties:
      cid:
        type: string
      engine:
        type: integer
      engine_name:
        type: string
      metadata:
        patternProperties:
          .*:
            type: string
        type: object
      name:
        type: string
      path:
        type: string
      url:
        type: string
    required:
    - engine_name
    - name
    - cid
    - path
    type: object
$id: https://github.com/filecoin-project/bacalhau/pkg/model/job-spec
$ref: '#/$defs/JobSpec'
$schema: https://json-schema.org/draft/2020-12/schema
